<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demostraci√≥n SOLID - Principios de Programaci√≥n</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }

        .nav-btn:hover, .nav-btn.active {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.6);
            transform: translateY(-2px);
        }

        .content-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .principle-card {
            background: #f8f9fa;
            border-left: 5px solid #007bff;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .principle-card h3 {
            color: #007bff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .code-example {
            background: #2d3748;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .code-example pre {
            margin: 0;
            font-size: 14px;
            line-height: 1.5;
        }

        .file-path {
            background: #4a5568;
            color: #e2e8f0;
            padding: 8px 15px;
            border-radius: 5px 5px 0 0;
            font-size: 12px;
            font-family: monospace;
        }

        .explanation {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .explanation h4 {
            color: #2d5a2d;
            margin-bottom: 10px;
        }

        .step-counter {
            background: #007bff;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }

        .demo-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .demo-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: background 0.3s;
        }

        .demo-btn:hover {
            background: #218838;
        }

        .api-result {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            font-family: monospace;
            white-space: pre-wrap;
        }

        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 4px;
            border-radius: 2px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: #28a745;
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .icon {
            margin-right: 8px;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .navigation {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-btn {
                width: 200px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-code"></i> Principios SOLID</h1>
            <p>Demostraci√≥n interactiva con ejemplos pr√°cticos del proyecto</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="navigation">
            <button class="nav-btn active" onclick="showSection('intro')">üè† Introducci√≥n</button>
            <button class="nav-btn" onclick="showSection('srp')">S - SRP</button>
            <button class="nav-btn" onclick="showSection('ocp')">O - OCP</button>
            <button class="nav-btn" onclick="showSection('lsp')">L - LSP</button>
            <button class="nav-btn" onclick="showSection('isp')">I - ISP</button>
            <button class="nav-btn" onclick="showSection('dip')">D - DIP</button>
            <button class="nav-btn" onclick="showSection('cohesion')">üîó Cohesi√≥n</button>
            <button class="nav-btn" onclick="showSection('coupling')">üîÄ Acoplamiento</button>
            <button class="nav-btn" onclick="showSection('di')">üíâ Inyecci√≥n DI</button>
            <button class="nav-btn" onclick="showSection('demo')">üöÄ Demo API</button>
        </div>

        <!-- Introducci√≥n -->
        <div id="intro" class="content-section active">
            <h2><i class="fas fa-home icon"></i>Bienvenido a la Demostraci√≥n SOLID</h2>
            <p>Este proyecto demuestra los <strong>principios SOLID</strong>, <strong>cohesi√≥n</strong>, <strong>acoplamiento</strong> e <strong>inyecci√≥n de dependencias</strong> usando Node.js, Express y TypeScript.</p>
            
            <div class="principle-card">
                <h3><i class="fas fa-lightbulb icon"></i>¬øQu√© son los principios SOLID?</h3>
                <p>SOLID es un acr√≥nimo que representa cinco principios fundamentales de la programaci√≥n orientada a objetos:</p>
                <ul style="margin: 15px 0 0 20px;">
                    <li><strong>S</strong> - Single Responsibility Principle (Principio de Responsabilidad √önica)</li>
                    <li><strong>O</strong> - Open/Closed Principle (Principio Abierto/Cerrado)</li>
                    <li><strong>L</strong> - Liskov Substitution Principle (Principio de Sustituci√≥n de Liskov)</li>
                    <li><strong>I</strong> - Interface Segregation Principle (Principio de Segregaci√≥n de Interfaces)</li>
                    <li><strong>D</strong> - Dependency Inversion Principle (Principio de Inversi√≥n de Dependencias)</li>
                </ul>
            </div>

            <div class="explanation">
                <h4><i class="fas fa-info-circle icon"></i>Estructura del Proyecto</h4>
                <p>Nuestro proyecto est√° organizado siguiendo estos principios:</p>
                <ul style="margin: 10px 0 0 20px;">
                    <li><code>src/interfaces/</code> - Definiciones de contratos (ISP, DIP)</li>
                    <li><code>src/models/</code> - Entidades de dominio (SRP)</li>
                    <li><code>src/services/</code> - L√≥gica de negocio (SRP, OCP)</li>
                    <li><code>src/repositories/</code> - Capa de persistencia (DIP)</li>
                    <li><code>src/controllers/</code> - Controladores HTTP (SRP)</li>
                    <li><code>src/container/</code> - Inyecci√≥n de dependencias</li>
                </ul>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa-play icon"></i>Navegaci√≥n</h4>
                <p>Usa los botones de arriba para explorar cada principio con ejemplos de c√≥digo real del proyecto.</p>
                <button class="demo-btn" onclick="showSection('srp')">Comenzar con SRP ‚Üí</button>
            </div>
        </div>

        <!-- SRP - Single Responsibility Principle -->
        <div id="srp" class="content-section">
            <h2><span class="step-counter">S</span>Single Responsibility Principle (SRP)</h2>
            <p><strong>"Una clase debe tener una sola raz√≥n para cambiar"</strong></p>

            <div class="principle-card">
                <h3><i class="fas fa-target icon"></i>¬øQu√© significa SRP?</h3>
                <p>Cada clase debe tener una √∫nica responsabilidad y una sola raz√≥n para cambiar. Esto hace el c√≥digo m√°s mantenible y testeable.</p>
            </div>

            <div class="explanation">
                <h4><i class="fas fa-check-circle icon"></i>Ejemplo: Clase User</h4>
                <p>Nuestra clase <code>User</code> solo se encarga de representar y validar datos de usuario:</p>
            </div>

            <div class="file-path">üìÅ src/models/User.ts</div>
            <div class="code-example">
                <pre><code class="language-typescript">export class User implements IUser {
  constructor(
    public readonly id: string,
    public email: string,
    public name: string,
    public readonly createdAt: Date = new Date()
  ) {
    this.validateEmail();
    this.validateName();
  }

  // ‚úÖ SRP: Solo validaci√≥n de email
  private validateEmail(): void {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(this.email)) {
      throw new Error('Email inv√°lido');
    }
  }

  // ‚úÖ SRP: Solo validaci√≥n de nombre
  private validateName(): void {
    if (!this.name || this.name.trim().length < 2) {
      throw new Error('El nombre debe tener al menos 2 caracteres');
    }
  }
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa-lightbulb icon"></i>Otros ejemplos de SRP en el proyecto:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li><code>BcryptPasswordHasher</code> - Solo hash de contrase√±as</li>
                    <li><code>JwtTokenService</code> - Solo manejo de tokens JWT</li>
                    <li><code>UserController</code> - Solo manejo de requests HTTP</li>
                </ul>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa-code icon"></i>Beneficios del SRP:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li>‚úÖ C√≥digo m√°s f√°cil de entender</li>
                    <li>‚úÖ M√°s f√°cil de testear</li>
                    <li>‚úÖ Menos acoplamiento</li>
                    <li>‚úÖ M√°s reutilizable</li>
                </ul>
                <button class="demo-btn" onclick="showSection('ocp')">Siguiente: OCP ‚Üí</button>
            </div>
        </div>

        <!-- OCP - Open/Closed Principle -->
        <div id="ocp" class="content-section">
            <h2><span class="step-counter">O</span>Open/Closed Principle (OCP)</h2>
            <p><strong>"Las entidades de software deben estar abiertas para extensi√≥n, pero cerradas para modificaci√≥n"</strong></p>

            <div class="principle-card">
                <h3><i class="fas fa-expand-arrows-alt icon"></i>¬øQu√© significa OCP?</h3>
                <p>Debes poder extender el comportamiento de una clase sin modificar su c√≥digo existente. Esto se logra usando interfaces y herencia.</p>
            </div>

            <div class="explanation">
                <h4><i class="fas fa-check-circle icon"></i>Ejemplo: Interface IPasswordHasher</h4>
                <p>Podemos agregar nuevos algoritmos de hash sin modificar c√≥digo existente:</p>
            </div>

            <div class="file-path">üìÅ src/interfaces/IRepository.ts</div>
            <div class="code-example">
                <pre><code class="language-typescript">// ‚úÖ OCP: Interface abierta para extensi√≥n
export interface IPasswordHasher {
  hash(password: string): Promise&lt;string&gt;;
  compare(password: string, hash: string): Promise&lt;boolean&gt;;
}

// Implementaci√≥n actual
export class BcryptPasswordHasher implements IPasswordHasher {
  async hash(password: string): Promise&lt;string&gt; {
    return bcrypt.hash(password, 12);
  }
  
  async compare(password: string, hash: string): Promise&lt;boolean&gt; {
    return bcrypt.compare(password, hash);
  }
}

// ‚úÖ Nueva implementaci√≥n sin modificar c√≥digo existente
export class Argon2PasswordHasher implements IPasswordHasher {
  async hash(password: string): Promise&lt;string&gt; {
    // Implementaci√≥n con Argon2
    return argon2.hash(password);
  }
  
  async compare(password: string, hash: string): Promise&lt;boolean&gt; {
    return argon2.verify(hash, password);
  }
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa-lightbulb icon"></i>M√°s ejemplos de OCP:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li><code>IUserRepository</code> - Podemos agregar MongoDB, PostgreSQL, etc.</li>
                    <li><code>ITokenService</code> - Podemos usar JWT, OAuth, etc.</li>
                    <li>Middleware - Podemos agregar nuevos middleware sin modificar existentes</li>
                </ul>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa-plus icon"></i>Beneficios del OCP:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li>‚úÖ Extensibilidad sin riesgo</li>
                    <li>‚úÖ C√≥digo estable y confiable</li>
                    <li>‚úÖ Facilita el testing</li>
                    <li>‚úÖ Reduce bugs en c√≥digo existente</li>
                </ul>
                <button class="demo-btn" onclick="showSection('lsp')">Siguiente: LSP ‚Üí</button>
            </div>
        </div>

        <!-- LSP - Liskov Substitution Principle -->
        <div id="lsp" class="content-section">
            <h2><span class="step-counter">L</span>Liskov Substitution Principle (LSP)</h2>
            <p><strong>"Los objetos de una superclase deben ser reemplazables por objetos de sus subclases sin alterar el funcionamiento del programa"</strong></p>

            <div class="principle-card">
                <h3><i class="fas fa-exchange-alt icon"></i>¬øQu√© significa LSP?</h3>
                <p>Las implementaciones de una interface deben ser intercambiables sin romper la funcionalidad.</p>
            </div>

            <div class="explanation">
                <h4><i class="fas fa-check-circle icon"></i>Ejemplo: Implementaciones de IUserRepository</h4>
                <p>Cualquier implementaci√≥n de <code>IUserRepository</code> debe funcionar igual:</p>
            </div>

            <div class="file-path">üìÅ src/services/UserService.ts</div>
            <div class="code-example">
                <pre><code class="language-typescript">export class UserService {
  constructor(
    private userRepository: IUserRepository, // ‚úÖ LSP: Acepta cualquier implementaci√≥n
    private passwordHasher: IPasswordHasher,
    private tokenService: ITokenService
  ) {}

  async createUser(userData: ICreateUser): Promise&lt;User&gt; {
    // ‚úÖ LSP: Funciona con InMemoryUserRepository, PostgreSQLUserRepository, etc.
    const existingUser = await this.userRepository.findByEmail(userData.email);
    
    if (existingUser) {
      throw new Error('El usuario ya existe');
    }

    const hashedPassword = await this.passwordHasher.hash(userData.password);
    
    return this.userRepository.create({
      ...userData,
      passwordHash: hashedPassword
    });
  }
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa-lightbulb icon"></i>Implementaciones intercambiables:</h4>
            </div>

            <div class="file-path">üìÅ src/repositories/InMemoryUserRepository.ts</div>
            <div class="code-example">
                <pre><code class="language-typescript">// ‚úÖ LSP: Implementaci√≥n en memoria
export class InMemoryUserRepository implements IUserRepository {
  private users: Map&lt;string, User&gt; = new Map();

  async findByEmail(email: string): Promise&lt;User | null&gt; {
    for (const user of this.users.values()) {
      if (user.email === email) return user;
    }
    return null;
  }
}

// ‚úÖ LSP: Implementaci√≥n con base de datos (ejemplo)
export class PostgreSQLUserRepository implements IUserRepository {
  async findByEmail(email: string): Promise&lt;User | null&gt; {
    const result = await this.db.query('SELECT * FROM users WHERE email = $1', [email]);
    return result.rows[0] ? new User(...result.rows[0]) : null;
  }
}</code></pre>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa-sync icon"></i>Beneficios del LSP:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li>‚úÖ Intercambiabilidad garantizada</li>
                    <li>‚úÖ Polimorfismo confiable</li>
                    <li>‚úÖ Testing m√°s f√°cil (mocks)</li>
                    <li>‚úÖ Flexibilidad en implementaciones</li>
                </ul>
                <button class="demo-btn" onclick="showSection('isp')">Siguiente: ISP ‚Üí</button>
            </div>
        </div>

        <!-- ISP - Interface Segregation Principle -->
        <div id="isp" class="content-section">
            <h2><span class="step-counter">I</span>Interface Segregation Principle (ISP)</h2>
            <p><strong>"Los clientes no deben depender de interfaces que no usan"</strong></p>

            <div class="principle-card">
                <h3><i class="fas fa-puzzle-piece icon"></i>¬øQu√© significa ISP?</h3>
                <p>Es mejor tener muchas interfaces espec√≠ficas que una interface grande y general.</p>
            </div>

            <div class="explanation">
                <h4><i class="fas fa-check-circle icon"></i>Ejemplo: Interfaces segregadas para User</h4>
                <p>En lugar de una interface gigante, tenemos interfaces espec√≠ficas:</p>
            </div>

            <div class="file-path">üìÅ src/interfaces/IUser.ts</div>
            <div class="code-example">
                <pre><code class="language-typescript">// ‚úÖ ISP: Interface b√°sica para datos de usuario
export interface IUser {
  id: string;
  email: string;
  name: string;
  createdAt: Date;
}

// ‚úÖ ISP: Interface espec√≠fica para autenticaci√≥n
export interface IUserAuth {
  email: string;
  passwordHash: string;
}

// ‚úÖ ISP: Interface espec√≠fica para creaci√≥n
export interface ICreateUser {
  email: string;
  name: string;
  password: string;
  passwordHash?: string;
}

// ‚úÖ ISP: Interface espec√≠fica para actualizaci√≥n
export interface IUpdateUser {
  email?: string;
  name?: string;
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="times icon"></i>‚ùå Violaci√≥n del ISP (ejemplo de lo que NO hacer):</h4>
            </div>

            <div class="code-example">
                <pre><code class="language-typescript">// ‚ùå ISP Violado: Interface demasiado grande
interface IUserEverything {
  // Datos b√°sicos
  id: string;
  email: string;
  name: string;
  
  // Autenticaci√≥n
  passwordHash: string;
  login(password: string): boolean;
  
  // Persistencia
  save(): void;
  delete(): void;
  
  // Notificaciones
  sendEmail(message: string): void;
  sendSMS(message: string): void;
  
  // Reportes
  generateReport(): string;
  exportToPDF(): Buffer;
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa-lightbulb icon"></i>M√°s ejemplos de ISP en el proyecto:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li><code>IPasswordHasher</code> - Solo hash de contrase√±as</li>
                    <li><code>ITokenService</code> - Solo manejo de tokens</li>
                    <li><code>IUserRepository</code> - Solo operaciones de persistencia</li>
                </ul>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa-cut icon"></i>Beneficios del ISP:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li>‚úÖ Interfaces m√°s cohesivas</li>
                    <li>‚úÖ Menos dependencias innecesarias</li>
                    <li>‚úÖ M√°s f√°cil de implementar</li>
                    <li>‚úÖ Mejor testabilidad</li>
                </ul>
                <button class="demo-btn" onclick="showSection('dip')">Siguiente: DIP ‚Üí</button>
            </div>
        </div>

        <!-- DIP - Dependency Inversion Principle -->
        <div id="dip" class="content-section">
            <h2><span class="step-counter">D</span>Dependency Inversion Principle (DIP)</h2>
            <p><strong>"Depende de abstracciones, no de concreciones"</strong></p>

            <div class="principle-card">
                <h3><i class="fas fa-layer-group icon"></i>¬øQu√© significa DIP?</h3>
                <p>Los m√≥dulos de alto nivel no deben depender de m√≥dulos de bajo nivel. Ambos deben depender de abstracciones.</p>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="times icon"></i>‚ùå Sin DIP (ejemplo de lo que NO hacer):</h4>
            </div>

            <div class="code-example">
                <pre><code class="language-typescript">// ‚ùå DIP Violado: Dependencia directa de implementaciones
export class UserService {
  private userRepository: InMemoryUserRepository; // ‚ùå Dependencia concreta
  private passwordHasher: BcryptPasswordHasher;   // ‚ùå Dependencia concreta
  
  constructor() {
    this.userRepository = new InMemoryUserRepository(); // ‚ùå Acoplamiento fuerte
    this.passwordHasher = new BcryptPasswordHasher();   // ‚ùå Acoplamiento fuerte
  }
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="check-circle icon"></i>‚úÖ Con DIP (nuestro proyecto):</h4>
            </div>

            <div class="file-path">üìÅ src/services/UserService.ts</div>
            <div class="code-example">
                <pre><code class="language-typescript">// ‚úÖ DIP: Dependencias de abstracciones
export class UserService {
  constructor(
    private userRepository: IUserRepository,    // ‚úÖ Abstracci√≥n
    private passwordHasher: IPasswordHasher,    // ‚úÖ Abstracci√≥n
    private tokenService: ITokenService         // ‚úÖ Abstracci√≥n
  ) {}

  async authenticateUser(email: string, password: string): Promise&lt;string&gt; {
    // ‚úÖ Usa abstracciones, no implementaciones espec√≠ficas
    const user = await this.userRepository.findByEmail(email);
    
    if (!user) {
      throw new Error('Usuario no encontrado');
    }

    const userAuth = await this.userRepository.findAuthByEmail(email);
    const isValid = await this.passwordHasher.compare(password, userAuth!.passwordHash);
    
    if (!isValid) {
      throw new Error('Contrase√±a incorrecta');
    }

    return this.tokenService.generateToken({ userId: user.id, email: user.email });
  }
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="check-circle icon"></i>Inyecci√≥n de dependencias con contenedor:</h4>
            </div>

            <div class="file-path">üìÅ src/container/DIContainer.ts</div>
            <div class="code-example">
                <pre><code class="language-typescript">// ‚úÖ DIP: Contenedor resuelve dependencias
export class DIContainer {
  private services = new Map&lt;string, any&gt;();

  constructor() {
    this.registerServices();
  }

  private registerServices(): void {
    // ‚úÖ Registra implementaciones concretas
    this.services.set('IUserRepository', new InMemoryUserRepository());
    this.services.set('IPasswordHasher', new BcryptPasswordHasher());
    this.services.set('ITokenService', new JwtTokenService());
    
    // ‚úÖ UserService recibe abstracciones
    this.services.set('UserService', new UserService(
      this.get('IUserRepository'),
      this.get('IPasswordHasher'),
      this.get('ITokenService')
    ));
  }
}</code></pre>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa="arrow-up icon"></i>Beneficios del DIP:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li>‚úÖ Bajo acoplamiento</li>
                    <li>‚úÖ Alta flexibilidad</li>
                    <li>‚úÖ F√°cil testing (mocks)</li>
                    <li>‚úÖ Intercambiabilidad de implementaciones</li>
                </ul>
                <button class="demo-btn" onclick="showSection('cohesion')">Siguiente: Cohesi√≥n ‚Üí</button>
            </div>
        </div>

        <!-- Cohesi√≥n -->
        <div id="cohesion" class="content-section">
            <h2><i class="fas fa-link icon"></i>Alta Cohesi√≥n</h2>
            <p><strong>"Los elementos de un m√≥dulo deben trabajar juntos hacia un objetivo com√∫n"</strong></p>

            <div class="principle-card">
                <h3><i class="fas fa-bullseye icon"></i>¬øQu√© es la Cohesi√≥n?</h3>
                <p>La cohesi√≥n mide qu√© tan relacionadas est√°n las responsabilidades dentro de un m√≥dulo. <span class="highlight">Alta cohesi√≥n = mejor dise√±o</span>.</p>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="check-circle icon"></i>‚úÖ Ejemplo: Alta Cohesi√≥n en BcryptPasswordHasher</h4>
            </div>

            <div class="file-path">üìÅ src/services/PasswordHasher.ts</div>
            <div class="code-example">
                <pre><code class="language-typescript">// ‚úÖ Alta cohesi√≥n: Todo relacionado con hash de contrase√±as
export class BcryptPasswordHasher implements IPasswordHasher {
  private readonly saltRounds: number;

  constructor(saltRounds: number = 12) {
    this.saltRounds = saltRounds;
  }

  // ‚úÖ Cohesivo: Crear hash
  async hash(password: string): Promise&lt;string&gt; {
    this.validatePassword(password);
    return bcrypt.hash(password, this.saltRounds);
  }

  // ‚úÖ Cohesivo: Comparar hash
  async compare(password: string, hash: string): Promise&lt;boolean&gt; {
    this.validatePassword(password);
    this.validateHash(hash);
    return bcrypt.compare(password, hash);
  }

  // ‚úÖ Cohesivo: Validaci√≥n relacionada
  private validatePassword(password: string): void {
    if (!password || password.length < 6) {
      throw new Error('La contrase√±a debe tener al menos 6 caracteres');
    }
  }

  // ‚úÖ Cohesivo: Validaci√≥n relacionada
  private validateHash(hash: string): void {
    if (!hash || !hash.startsWith('$2b$')) {
      throw new Error('Hash de contrase√±a inv√°lido');
    }
  }
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="times icon"></i>‚ùå Ejemplo: Baja Cohesi√≥n (lo que NO hacer)</h4>
            </div>

            <div class="code-example">
                <pre><code class="language-typescript">// ‚ùå Baja cohesi√≥n: Responsabilidades no relacionadas
class UserUtilities {
  // Hash de contrase√±as
  hashPassword(password: string): string { /* ... */ }
  
  // Env√≠o de emails (no relacionado)
  sendEmail(to: string, subject: string): void { /* ... */ }
  
  // Validaci√≥n de datos (no relacionado)
  validateCreditCard(number: string): boolean { /* ... */ }
  
  // C√°lculos matem√°ticos (no relacionado)
  calculateTax(amount: number): number { /* ... */ }
  
  // Manejo de archivos (no relacionado)
  uploadFile(file: Buffer): string { /* ... */ }
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="lightbulb icon"></i>M√°s ejemplos de Alta Cohesi√≥n en el proyecto:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li><code>JwtTokenService</code> - Solo operaciones con tokens JWT</li>
                    <li><code>User</code> - Solo datos y validaciones de usuario</li>
                    <li><code>UserController</code> - Solo manejo de requests HTTP de usuarios</li>
                    <li><code>AuthMiddleware</code> - Solo autenticaci√≥n y autorizaci√≥n</li>
                </ul>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa="heart icon"></i>Beneficios de la Alta Cohesi√≥n:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li>‚úÖ C√≥digo m√°s f√°cil de entender</li>
                    <li>‚úÖ M√°s f√°cil de mantener</li>
                    <li>‚úÖ Mejor reutilizaci√≥n</li>
                    <li>‚úÖ Menos bugs</li>
                    <li>‚úÖ Testing m√°s simple</li>
                </ul>
                <button class="demo-btn" onclick="showSection('coupling')">Siguiente: Acoplamiento ‚Üí</button>
            </div>
        </div>

        <!-- Acoplamiento -->
        <div id="coupling" class="content-section">
            <h2><i class="fas fa-unlink icon"></i>Bajo Acoplamiento</h2>
            <p><strong>"Los m√≥dulos deben depender lo menos posible unos de otros"</strong></p>

            <div class="principle-card">
                <h3><i class="fas fa-chain-broken icon"></i>¬øQu√© es el Acoplamiento?</h3>
                <p>El acoplamiento mide qu√© tan dependientes son los m√≥dulos entre s√≠. <span class="highlight">Bajo acoplamiento = mejor dise√±o</span>.</p>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="check-circle icon"></i>‚úÖ Ejemplo: Bajo Acoplamiento con Interfaces</h4>
            </div>

            <div class="file-path">üìÅ src/controllers/UserController.ts</div>
            <div class="code-example">
                <pre><code class="language-typescript">// ‚úÖ Bajo acoplamiento: Solo depende del contenedor DI
export class UserController {
  private userService: UserService;

  constructor() {
    const container = DIContainer.getInstance();
    // ‚úÖ Obtiene dependencia del contenedor, no la crea directamente
    this.userService = container.get&lt;UserService&gt;('UserService');
  }

  async register(req: Request, res: Response): Promise&lt;void&gt; {
    try {
      // ‚úÖ Solo se comunica con UserService, no con repositorios directamente
      const user = await this.userService.createUser(req.body);
      
      res.status(201).json({
        success: true,
        data: user.toPublicObject(),
        message: 'Usuario creado exitosamente'
      });
    } catch (error) {
      res.status(400).json({
        success: false,
        message: error instanceof Error ? error.message : 'Error desconocido'
      });
    }
  }
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="times icon"></i>‚ùå Ejemplo: Alto Acoplamiento (lo que NO hacer)</h4>
            </div>

            <div class="code-example">
                <pre><code class="language-typescript">// ‚ùå Alto acoplamiento: Dependencias directas y m√∫ltiples
class BadUserController {
  private userRepository: InMemoryUserRepository;     // ‚ùå Dependencia directa
  private passwordHasher: BcryptPasswordHasher;       // ‚ùå Dependencia directa
  private tokenService: JwtTokenService;              // ‚ùå Dependencia directa
  private emailService: NodemailerEmailService;      // ‚ùå Dependencia directa
  private logger: WinstonLogger;                      // ‚ùå Dependencia directa
  private validator: JoiValidator;                    // ‚ùå Dependencia directa

  constructor() {
    // ‚ùå Crea todas las dependencias directamente
    this.userRepository = new InMemoryUserRepository();
    this.passwordHasher = new BcryptPasswordHasher();
    this.tokenService = new JwtTokenService('secret', '24h');
    this.emailService = new NodemailerEmailService(config);
    this.logger = new WinstonLogger();
    this.validator = new JoiValidator();
  }

  async register(req: Request, res: Response): Promise&lt;void&gt; {
    // ‚ùå L√≥gica de negocio mezclada con l√≥gica de presentaci√≥n
    const validation = this.validator.validate(req.body);
    const hashedPassword = await this.passwordHasher.hash(req.body.password);
    const user = await this.userRepository.create({...req.body, passwordHash: hashedPassword});
    await this.emailService.sendWelcomeEmail(user.email);
    this.logger.info(`User created: ${user.id}`);
    res.json(user);
  }
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="lightbulb icon"></i>Estrategias para Bajo Acoplamiento en el proyecto:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li><strong>Inyecci√≥n de Dependencias:</strong> <code>DIContainer</code> maneja todas las dependencias</li>
                    <li><strong>Interfaces:</strong> Comunicaci√≥n a trav√©s de contratos, no implementaciones</li>
                    <li><strong>Capas separadas:</strong> Controller ‚Üí Service ‚Üí Repository</li>
                    <li><strong>Middleware:</strong> Responsabilidades transversales separadas</li>
                </ul>
            </div>

            <div class="file-path">üìÅ Arquitectura de Capas (Bajo Acoplamiento)</div>
            <div class="code-example">
                <pre><code class="language-text">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Controllers   ‚îÇ ‚Üê Solo maneja HTTP requests/responses
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ (usa)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Services     ‚îÇ ‚Üê Solo l√≥gica de negocio
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ (usa)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Repositories   ‚îÇ ‚Üê Solo persistencia de datos
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚úÖ Cada capa solo conoce la capa inmediatamente inferior
‚úÖ Comunicaci√≥n a trav√©s de interfaces
‚úÖ F√°cil de testear y modificar</code></pre>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa="thumbs-up icon"></i>Beneficios del Bajo Acoplamiento:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li>‚úÖ M√≥dulos independientes</li>
                    <li>‚úÖ F√°cil testing (mocking)</li>
                    <li>‚úÖ Cambios localizados</li>
                    <li>‚úÖ Mejor reutilizaci√≥n</li>
                    <li>‚úÖ Desarrollo en paralelo</li>
                </ul>
                <button class="demo-btn" onclick="showSection('di')">Siguiente: Inyecci√≥n DI ‚Üí</button>
            </div>
        </div>

        <!-- Inyecci√≥n de Dependencias -->
        <div id="di" class="content-section">
            <h2><i class="fas fa-syringe icon"></i>Inyecci√≥n de Dependencias (DI)</h2>
            <p><strong>"No crees tus dependencias, que te las proporcionen"</strong></p>

            <div class="principle-card">
                <h3><i class="fas fa-magic icon"></i>¬øQu√© es la Inyecci√≥n de Dependencias?</h3>
                <p>Es un patr√≥n donde las dependencias se proporcionan desde el exterior en lugar de crearlas internamente. Implementa el principio DIP.</p>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="check-circle icon"></i>Nuestro Contenedor DI</h4>
            </div>

            <div class="file-path">üìÅ src/container/DIContainer.ts</div>
            <div class="code-example">
                <pre><code class="language-typescript">// ‚úÖ Contenedor DI: Gesti√≥n centralizada de dependencias
export class DIContainer {
  private static instance: DIContainer;
  private services = new Map&lt;string, any&gt;();

  // ‚úÖ Singleton: Una sola instancia del contenedor
  static getInstance(): DIContainer {
    if (!DIContainer.instance) {
      DIContainer.instance = new DIContainer();
    }
    return DIContainer.instance;
  }

  constructor() {
    this.registerServices();
  }

  // ‚úÖ Registro de servicios: Configuraci√≥n centralizada
  private registerServices(): void {
    // Servicios base
    this.services.set('IUserRepository', new InMemoryUserRepository());
    this.services.set('IPasswordHasher', new BcryptPasswordHasher());
    this.services.set('ITokenService', new JwtTokenService(
      process.env.JWT_SECRET || 'demo-secret-key',
      process.env.JWT_EXPIRES_IN || '24h'
    ));

    // Servicios que dependen de otros servicios
    this.services.set('UserService', new UserService(
      this.get&lt;InMemoryUserRepository&gt;('IUserRepository'),
      this.get&lt;IPasswordHasher&gt;('IPasswordHasher'),
      this.get&lt;ITokenService&gt;('ITokenService')
    ));
  }

  // ‚úÖ Resoluci√≥n de dependencias
  get&lt;T&gt;(serviceName: string): T {
    const service = this.services.get(serviceName);
    if (!service) {
      throw new Error(`Servicio no encontrado: ${serviceName}`);
    }
    return service;
  }
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="lightbulb icon"></i>Tipos de Inyecci√≥n de Dependencias:</h4>
            </div>

            <div class="code-example">
                <pre><code class="language-typescript">// 1. ‚úÖ Constructor Injection (nuestro enfoque)
class UserService {
  constructor(
    private userRepository: IUserRepository,  // ‚úÖ Inyectado por constructor
    private passwordHasher: IPasswordHasher   // ‚úÖ Inyectado por constructor
  ) {}
}

// 2. ‚úÖ Property Injection
class UserService {
  @Inject('IUserRepository')
  private userRepository: IUserRepository;
}

// 3. ‚úÖ Method Injection
class UserService {
  setUserRepository(userRepository: IUserRepository): void {
    this.userRepository = userRepository;
  }
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="cogs icon"></i>Uso del Contenedor DI en la aplicaci√≥n:</h4>
            </div>

            <div class="file-path">üìÅ src/controllers/UserController.ts</div>
            <div class="code-example">
                <pre><code class="language-typescript">export class UserController {
  private userService: UserService;

  constructor() {
    // ‚úÖ Obtiene dependencias del contenedor
    const container = DIContainer.getInstance();
    this.userService = container.get&lt;UserService&gt;('UserService');
  }

  // ‚úÖ El controller no sabe c√≥mo se crean las dependencias
  async login(req: Request, res: Response): Promise&lt;void&gt; {
    try {
      const { email, password } = req.body;
      const token = await this.userService.authenticateUser(email, password);
      
      res.json({
        success: true,
        data: { token },
        message: 'Login exitoso'
      });
    } catch (error) {
      res.status(401).json({
        success: false,
        message: error instanceof Error ? error.message : 'Error de autenticaci√≥n'
      });
    }
  }
}</code></pre>
            </div>

            <div class="explanation">
                <h4><i class="fas fa="flask icon"></i>Beneficios para Testing:</h4>
            </div>

            <div class="code-example">
                <pre><code class="language-typescript">// ‚úÖ Testing f√°cil con mocks
describe('UserService', () => {
  let userService: UserService;
  let mockUserRepository: jest.Mocked&lt;IUserRepository&gt;;
  let mockPasswordHasher: jest.Mocked&lt;IPasswordHasher&gt;;

  beforeEach(() => {
    // ‚úÖ Creamos mocks de las dependencias
    mockUserRepository = {
      findByEmail: jest.fn(),
      create: jest.fn(),
      // ... otros m√©todos
    };

    mockPasswordHasher = {
      hash: jest.fn(),
      compare: jest.fn()
    };

    // ‚úÖ Inyectamos los mocks
    userService = new UserService(
      mockUserRepository,
      mockPasswordHasher,
      mockTokenService
    );
  });

  it('should create user successfully', async () => {
    // ‚úÖ Configuramos el comportamiento del mock
    mockUserRepository.findByEmail.mockResolvedValue(null);
    mockPasswordHasher.hash.mockResolvedValue('hashed-password');
    
    // ‚úÖ Ejecutamos el test
    const result = await userService.createUser(userData);
    
    // ‚úÖ Verificamos las interacciones
    expect(mockUserRepository.findByEmail).toHaveBeenCalledWith(userData.email);
    expect(mockPasswordHasher.hash).toHaveBeenCalledWith(userData.password);
  });
});</code></pre>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa="rocket icon"></i>Beneficios de la Inyecci√≥n de Dependencias:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li>‚úÖ <strong>Testabilidad:</strong> F√°cil mocking de dependencias</li>
                    <li>‚úÖ <strong>Flexibilidad:</strong> Intercambio f√°cil de implementaciones</li>
                    <li>‚úÖ <strong>Configuraci√≥n centralizada:</strong> Un solo lugar para configurar dependencias</li>
                    <li>‚úÖ <strong>Bajo acoplamiento:</strong> Clases no crean sus dependencias</li>
                    <li>‚úÖ <strong>Principio DIP:</strong> Dependencias de abstracciones</li>
                </ul>
                <button class="demo-btn" onclick="showSection('demo')">Siguiente: Demo API ‚Üí</button>
            </div>
        </div>

        <!-- Demo API -->
        <div id="demo" class="content-section">
            <h2><i class="fas fa-rocket icon"></i>Demostraci√≥n de la API</h2>
            <p><strong>Prueba los principios SOLID en acci√≥n</strong></p>

            <div class="principle-card">
                <h3><i class="fas fa-play icon"></i>API en Funcionamiento</h3>
                <p>Nuestra API demuestra todos los principios SOLID trabajando juntos. Prueba los endpoints:</p>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa-user-plus icon"></i>1. Registro de Usuario</h4>
                <p>Demuestra: <span class="highlight">SRP, DIP, Inyecci√≥n DI</span></p>
                <button class="demo-btn" onclick="testRegister()">üîß Probar Registro</button>
                <div id="registerResult" class="api-result" style="display: none;"></div>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa-sign-in-alt icon"></i>2. Login de Usuario</h4>
                <p>Demuestra: <span class="highlight">ISP, LSP, Alta Cohesi√≥n</span></p>
                <button class="demo-btn" onclick="testLogin()">üîë Probar Login</button>
                <div id="loginResult" class="api-result" style="display: none;"></div>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa-user icon"></i>3. Obtener Perfil</h4>
                <p>Demuestra: <span class="highlight">OCP, Bajo Acoplamiento</span></p>
                <button class="demo-btn" onclick="testProfile()" id="profileBtn" disabled>üë§ Obtener Perfil</button>
                <div id="profileResult" class="api-result" style="display: none;"></div>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa-users icon"></i>4. Listar Usuarios</h4>
                <p>Demuestra: <span class="highlight">Todos los principios SOLID</span></p>
                <button class="demo-btn" onclick="testUsers()" id="usersBtn" disabled>üìã Listar Usuarios</button>
                <div id="usersResult" class="api-result" style="display: none;"></div>
            </div>

            <div class="demo-section">
                <h4><i class="fas fa-chart-bar icon"></i>5. Estad√≠sticas del Sistema</h4>
                <p>Informaci√≥n sobre la arquitectura implementada</p>
                <button class="demo-btn" onclick="testStats()">üìä Ver Estad√≠sticas</button>
                <div id="statsResult" class="api-result" style="display: none;"></div>
            </div>

            <div class="explanation">
                <h4><i class="fas fa-info-circle icon"></i>Endpoints Disponibles:</h4>
                <ul style="margin: 10px 0 0 20px;">
                    <li><code>GET /health</code> - Health check</li>
                    <li><code>GET /api</code> - Documentaci√≥n de la API</li>
                    <li><code>POST /api/users/register</code> - Registro de usuarios</li>
                    <li><code>POST /api/users/login</code> - Autenticaci√≥n</li>
                    <li><code>GET /api/users/profile</code> - Perfil del usuario (requiere auth)</li>
                    <li><code>PUT /api/users/profile</code> - Actualizar perfil (requiere auth)</li>
                    <li><code>GET /api/users</code> - Listar usuarios (requiere auth)</li>
                    <li><code>GET /api/stats</code> - Estad√≠sticas del sistema</li>
                </ul>
            </div>

            <div class="explanation">
                <h4><i class="fas fa-graduation-cap icon"></i>¬øQu√© hemos aprendido?</h4>
                <p>Este proyecto demuestra c√≥mo los principios SOLID, cohesi√≥n, acoplamiento e inyecci√≥n de dependencias trabajan juntos para crear:</p>
                <ul style="margin: 10px 0 0 20px;">
                    <li>‚úÖ <strong>C√≥digo mantenible:</strong> F√°cil de modificar y extender</li>
                    <li>‚úÖ <strong>C√≥digo testeable:</strong> Cada componente se puede probar independientemente</li>
                    <li>‚úÖ <strong>C√≥digo flexible:</strong> F√°cil intercambio de implementaciones</li>
                    <li>‚úÖ <strong>C√≥digo escalable:</strong> Preparado para crecer</li>
                    <li>‚úÖ <strong>C√≥digo limpio:</strong> F√°cil de entender y leer</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        let currentToken = '';
        const sections = ['intro', 'srp', 'ocp', 'lsp', 'isp', 'dip', 'cohesion', 'coupling', 'di', 'demo'];
        let currentSectionIndex = 0;

        function showSection(sectionId) {
            // Ocultar todas las secciones
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            // Mostrar la secci√≥n seleccionada
            document.getElementById(sectionId).classList.add('active');

            // Actualizar navegaci√≥n
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Actualizar progreso
            currentSectionIndex = sections.indexOf(sectionId);
            updateProgress();

            // Resaltar c√≥digo
            Prism.highlightAll();
        }

        function updateProgress() {
            const progress = ((currentSectionIndex + 1) / sections.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        async function testRegister() {
            const resultDiv = document.getElementById('registerResult');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Registrando usuario...';

            try {
                const response = await fetch('/api/users/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email: 'demo@example.com',
                        name: 'Usuario Demo',
                        password: 'password123'
                    })
                });

                const data = await response.json();
                resultDiv.textContent = JSON.stringify(data, null, 2);

                if (data.success) {
                    resultDiv.style.background = '#d4edda';
                    resultDiv.style.borderColor = '#c3e6cb';
                } else {
                    resultDiv.style.background = '#f8d7da';
                    resultDiv.style.borderColor = '#f5c6cb';
                }
            } catch (error) {
                resultDiv.textContent = 'Error: ' + error.message;
                resultDiv.style.background = '#f8d7da';
                resultDiv.style.borderColor = '#f5c6cb';
            }
        }

        async function testLogin() {
            const resultDiv = document.getElementById('loginResult');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Iniciando sesi√≥n...';

            try {
                const response = await fetch('/api/users/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email: 'demo@example.com',
                        password: 'password123'
                    })
                });

                const data = await response.json();
                resultDiv.textContent = JSON.stringify(data, null, 2);

                if (data.success && data.data.token) {
                    currentToken = data.data.token;
                    resultDiv.style.background = '#d4edda';
                    resultDiv.style.borderColor = '#c3e6cb';
                    
                    // Habilitar botones que requieren autenticaci√≥n
                    document.getElementById('profileBtn').disabled = false;
                    document.getElementById('usersBtn').disabled = false;
                } else {
                    resultDiv.style.background = '#f8d7da';
                    resultDiv.style.borderColor = '#f5c6cb';
                }
            } catch (error) {
                resultDiv.textContent = 'Error: ' + error.message;
                resultDiv.style.background = '#f8d7da';
                resultDiv.style.borderColor = '#f5c6cb';
            }
        }

        async function testProfile() {
            if (!currentToken) {
                alert('Primero debes hacer login');
                return;
            }

            const resultDiv = document.getElementById('profileResult');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Obteniendo perfil...';

            try {
                const response = await fetch('/api/users/profile', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${currentToken}`,
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                resultDiv.textContent = JSON.stringify(data, null, 2);

                if (data.success) {
                    resultDiv.style.background = '#d4edda';
                    resultDiv.style.borderColor = '#c3e6cb';
                } else {
                    resultDiv.style.background = '#f8d7da';
                    resultDiv.style.borderColor = '#f5c6cb';
                }
            } catch (error) {
                resultDiv.textContent = 'Error: ' + error.message;
                resultDiv.style.background = '#f8d7da';
                resultDiv.style.borderColor = '#f5c6cb';
            }
        }

        async function testUsers() {
            if (!currentToken) {
                alert('Primero debes hacer login');
                return;
            }

            const resultDiv = document.getElementById('usersResult');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Obteniendo usuarios...';

            try {
                const response = await fetch('/api/users', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${currentToken}`,
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                resultDiv.textContent = JSON.stringify(data, null, 2);

                if (data.success) {
                    resultDiv.style.background = '#d4edda';
                    resultDiv.style.borderColor = '#c3e6cb';
                } else {
                    resultDiv.style.background = '#f8d7da';
                    resultDiv.style.borderColor = '#f5c6cb';
                }
            } catch (error) {
                resultDiv.textContent = 'Error: ' + error.message;
                resultDiv.style.background = '#f8d7da';
                resultDiv.style.borderColor = '#f5c6cb';
            }
        }

        async function testStats() {
            const resultDiv = document.getElementById('statsResult');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'Obteniendo estad√≠sticas...';

            try {
                const response = await fetch('/api/stats', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                resultDiv.textContent = JSON.stringify(data, null, 2);

                if (data.success) {
                    resultDiv.style.background = '#d4edda';
                    resultDiv.style.borderColor = '#c3e6cb';
                } else {
                    resultDiv.style.background = '#f8d7da';
                    resultDiv.style.borderColor = '#f5c6cb';
                }
            } catch (error) {
                resultDiv.textContent = 'Error: ' + error.message;
                resultDiv.style.background = '#f8d7da';
                resultDiv.style.borderColor = '#f5c6cb';
            }
        }

        // Inicializar la aplicaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
            Prism.highlightAll();
        });
    </script>
</body>
</html>
                },